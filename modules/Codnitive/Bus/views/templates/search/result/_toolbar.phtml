<?php 
$block = new \app\modules\Codnitive\Bus\blocks\Toolbar;

$block->html()->setNameSpace('bus');
?>

<?php if ($block->getSearchParams()): ?>
<div class="container mt-5">
    <div class="search-box-body flex-wrap adjacent-days md-padding d-flex justify-content-between align-items-center">
        <div class="col-md-5 col-sm-12 adjacent-days mb-3">
            <?php $searchModel = $block->getFormModel('-1 day'); ?>
            <?php /*$form = $block->beginForm([
                'action'  => [$block->getActionUrl()],
                'id'      => 'adjacent_days_prev',
                // 'method'  => 'GET',
            ]); ?>
                <?= $block->html()->getHiddenField($form, $searchModel, 'origin_name'); ?>
                <?= $block->html()->getHiddenField($form, $searchModel, 'origin'); ?>
                <?= $block->html()->getHiddenField($form, $searchModel, 'destination_name'); ?>
                <?= $block->html()->getHiddenField($form, $searchModel, 'destination'); ?>
                <?= $block->html()->getHiddenField($form, $searchModel, 'departing'); ?>
                
                <button type="submit" class="adjacent-days__prev">
                    <i class="fa fa-caret-right"></i><?= __('bus', 'Previous Day') ?>
                </button>
            <?php $block->endForm();*/ ?>
            <a href="<?= tools()->getUrl('bus/process/result', [
                    'path' => "{$searchModel->origin_name}-{$searchModel->destination_name}", 
                    'departing' => $searchModel->departing,
            ]) ?>">
                <button type="submit" class="adjacent-days__prev">
                    <i class="fa fa-caret-right"></i><?= __('bus', 'Previous Day') ?>
                </button>
            </a>
            <span class="adjacent-days__date"><?= $block->getDate() ?></span>

            <?php $searchModel = $block->getFormModel('+1 day'); ?>
            <?php /*$form = $block->beginForm([
                'action'  => [$block->getActionUrl()],
                'id'      => 'adjacent_days_next',
                // 'method'  => 'GET',
            ]); ?>
                <?= $block->html()->getHiddenField($form, $searchModel, 'origin_name'); ?>
                <?= $block->html()->getHiddenField($form, $searchModel, 'origin'); ?>
                <?= $block->html()->getHiddenField($form, $searchModel, 'destination_name'); ?>
                <?= $block->html()->getHiddenField($form, $searchModel, 'destination'); ?>
                <?= $block->html()->getHiddenField($form, $searchModel, 'departing'); ?>
                
                <button type="submit" class="adjacent-days__next">
                    <i class="fa fa-caret-left"></i><?= __('bus', 'Next Day') ?>
                </button>
            <?php $block->endForm();*/ ?>
            <a href="<?= tools()->getUrl('bus/process/result', [
                    'path' => "{$searchModel->origin_name}-{$searchModel->destination_name}", 
                    'departing' => $searchModel->departing,
            ]) ?>">
                <button type="submit" class="adjacent-days__next">
                    <i class="fa fa-caret-left"></i><?= __('bus', 'Next Day') ?>
                </button>
            </a>
        </div>

        <div class="col-md-7 col-sm-12 mb-3 sorting bar sort-button-group">
            <?php /*<span><?= __('bus', 'Sort by:') ?></span>*/ ?>
            <?php /*<button type="button" class="default-sort sort-btn" data-sort-by="original-order">
                </i><?= __('bus', 'Default') ?>
            </button>*/ ?>
            <button type="button" class="departing-sort sort-btn" data-sort-by="departing" data-sort-direction="desc">
                <i class="fa fa-sort-amount-up"></i><?= __('bus', 'Departing') ?>
            </button>
            <button type="button" class="price-sort sort-btn" data-sort-by="price" data-sort-direction="asc">
                <i class="fa fa-sort-amount-down"></i><?= __('bus', 'Price') ?>
            </button>
            <button type="button" class="discount-sort sort-btn" data-sort-by="discount" data-sort-direction="desc">
                <i class="fa fa-sort-amount-up"></i><?= __('bus', 'Discount') ?>
            </button>
        </div>

        <script type="text/javascript">
            var codnitiveIsotope = new codnitive.isotope();
            var busSearchResultList = codnitiveIsotope.init('.list.results .right-section', {
                price: '[data-price] parseFloat',
                departing: '[data-departing] parseInt',
                discount: '[data-discount] parseFloat',
            });
            codnitiveIsotope.sort(busSearchResultList);
        </script>
    </div>
</div>
<?php endif; ?>
